{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Mypage(){const[user,setUser]=useState(null);const[isEdit,setIsEdit]=useState(false);const[updatedUser,setUpdatedUser]=useState({email:'',username:'',password:''});useEffect(()=>{const userId=localStorage.getItem('userId');if(userId){axios.get(`http://localhost:8080/api/user/${userId}`).then(response=>{setUser(response.data);setUpdatedUser({email:response.data.email,username:response.data.username,password:''});}).catch(error=>{console.error(\"There was an error fetching user data!\",error);});}},[]);const handleEditClick=()=>{setIsEdit(true);};const handleChange=e=>{setUpdatedUser({...updatedUser,[e.target.name]:e.target.value// 예를 들어, name=\"email\"인 입력 필드에서 값이 변경되면 e.target.name은 \"email\"이 되고, 그 값은 e.target.value(입력된 값)로 업데이트\n});};const handleSave=()=>{const userId=localStorage.getItem('userId');axios.post(`http://localhost:8080/api/user/${userId}`,{...updatedUser,updateAt:new Date()}).then(response=>{setUser(response.data);setIsEdit(false);}).catch(error=>{console.error(\"There was an error updating user data!\",error);});};const handleCancel=()=>{setIsEdit(false);};const handleDelete=()=>{const userId=localStorage.getItem('userId');if(userId){axios.delete(`http://localhost:8080/api/user/${userId}`).then(response=>{alert(\"사용자 계정이 삭제되었습니다.\");// 계정 삭제 후에는 로그인 페이지로 리디렉션\nlocalStorage.removeItem('userId');window.location.href=\"/login\";}).catch(error=>{console.error(\"There was an error deleting the user data!\",error);alert(\"사용자 삭제에 실패했습니다.\");});}};return/*#__PURE__*/_jsx(\"div\",{children:user&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uB9C8\\uC774\\uD398\\uC774\\uC9C0\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC774\\uBA54\\uC77C: \",isEdit?/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:updatedUser.email,onChange:handleChange}):user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC0AC\\uC6A9\\uC790\\uBA85: \",isEdit?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:updatedUser.username,onChange:handleChange}):user.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uBE44\\uBC00\\uBC88\\uD638: \",isEdit?/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:updatedUser.password,onChange:handleChange}):'********']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC544\\uC774\\uB514: \",user.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uAD8C\\uD55C: \",user.role]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uAC00\\uC785\\uC77C: \",user.createAt]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC218\\uC815\\uC77C: \",user.updateAt]}),!isEdit?/*#__PURE__*/_jsx(\"button\",{onClick:handleEditClick,children:\"\\uC218\\uC815\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,children:\"\\uC800\\uC7A5\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancel,children:\"\\uCDE8\\uC18C\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,children:\"\\uACC4\\uC815 \\uC0AD\\uC81C\"})]})]})});}export default Mypage;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Mypage","user","setUser","isEdit","setIsEdit","updatedUser","setUpdatedUser","email","username","password","userId","localStorage","getItem","get","then","response","data","catch","error","console","handleEditClick","handleChange","e","target","name","value","handleSave","post","updateAt","Date","handleCancel","handleDelete","delete","alert","removeItem","window","location","href","children","type","onChange","id","role","createAt","onClick"],"sources":["C:/Users/USER/Desktop/발표 전/homereactCategory/src/components/Mypage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Mypage() {\r\n  const [user, setUser] = useState(null);\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [updatedUser, setUpdatedUser] = useState({\r\n    email: '',\r\n    username: '',\r\n    password: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem('userId');\r\n    if (userId) {\r\n      axios.get(`http://localhost:8080/api/user/${userId}`)\r\n        .then(response => {\r\n          setUser(response.data);\r\n          setUpdatedUser({\r\n            email: response.data.email,\r\n            username: response.data.username,\r\n            password: '',\r\n          });\r\n        })\r\n        .catch(error => {\r\n          console.error(\"There was an error fetching user data!\", error);\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  const handleEditClick = () => {\r\n    setIsEdit(true);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setUpdatedUser({\r\n      ...updatedUser,\r\n      [e.target.name]: e.target.value, // 예를 들어, name=\"email\"인 입력 필드에서 값이 변경되면 e.target.name은 \"email\"이 되고, 그 값은 e.target.value(입력된 값)로 업데이트\r\n    });\r\n  };\r\n\r\n  const handleSave = () => {\r\n    const userId = localStorage.getItem('userId');\r\n    axios.post(`http://localhost:8080/api/user/${userId}`, { ...updatedUser, updateAt: new Date() })\r\n      .then(response => {\r\n        setUser(response.data);\r\n        setIsEdit(false);\r\n      })\r\n      .catch(error => {\r\n        console.error(\"There was an error updating user data!\", error);\r\n      });\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsEdit(false);\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    const userId = localStorage.getItem('userId');\r\n    if (userId) {\r\n      axios.delete(`http://localhost:8080/api/user/${userId}`)\r\n        .then(response => {\r\n          alert(\"사용자 계정이 삭제되었습니다.\");\r\n          // 계정 삭제 후에는 로그인 페이지로 리디렉션\r\n          localStorage.removeItem('userId');\r\n          window.location.href = \"/login\";\r\n        })\r\n        .catch(error => {\r\n          console.error(\"There was an error deleting the user data!\", error);\r\n          alert(\"사용자 삭제에 실패했습니다.\");\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {user && (\r\n        <div>\r\n          <h2>마이페이지</h2>\r\n          <div>\r\n            <p>이메일: {isEdit ? <input type=\"email\" name=\"email\" value={updatedUser.email} onChange={handleChange} /> : user.email}</p>\r\n            <p>사용자명: {isEdit ? <input type=\"text\" name=\"username\" value={updatedUser.username} onChange={handleChange} /> : user.username}</p>\r\n            <p>비밀번호: {isEdit ? <input type=\"password\" name=\"password\" value={updatedUser.password} onChange={handleChange} /> : '********'}</p>\r\n            <p>아이디: {user.id}</p>\r\n            <p>권한: {user.role}</p>\r\n            <p>가입일: {user.createAt}</p>\r\n            <p>수정일: {user.updateAt}</p>\r\n            {!isEdit ? (\r\n              <button onClick={handleEditClick}>수정</button>\r\n            ) : (\r\n              <div>\r\n                <button onClick={handleSave}>저장</button>\r\n                <button onClick={handleCancel}>취소</button>\r\n              </div>\r\n            )}\r\n            {/* 삭제 버튼 추가 */}\r\n            <button onClick={handleDelete}>계정 삭제</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Mypage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}